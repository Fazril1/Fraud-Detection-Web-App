<button id="uploadTrainModelBtn" class="btn btn-primary">Upload Trained Model</button>

<div id="uploadModelContainer" style="display: none; margin-top: 20px;">
    <form id="uploadModelForm" enctype="multipart/form-data">
        <div>
            <label>Upload Logistic Regression (.pkl)</label>
            <input type="file" name="lr_model" accept=".pkl" required>
        </div>
        <div>
            <label>Upload Decision Tree (.pkl)</label>
            <input type="file" name="dt_model" accept=".pkl" required>
        </div>
        <div>
            <label>Upload XGBoost (.pkl)</label>
            <input type="file" name="xgb_model" accept=".pkl" required>
        </div>
        <button type="submit" class="btn btn-success mt-2">Submit</button>
    </form>

    <div id="loadinguploadtrainmodel" style="display: none;" class="text-info mt-2">
        Uploading...
    </div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function () {
    $('#uploadTrainModelBtn').click(function () {
        $('#uploadModelContainer').slideDown(); 
    });

    $('#uploadModelForm').submit(function (e) {
        e.preventDefault(); 

        var formData = new FormData(this);
        $('#loadinguploadtrainmodel').show();

        if (!formData.get('lr_model') || !formData.get('dt_model') || !formData.get('xgb_model')) {
            alert('All file models are required!');
            $('#loadinguploadtrainmodel').hide();
            return;
        }

        $.ajax({
            url: '/upload_models',      
            type: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function () {
                alert('Upload Success!');
                window.location.href = '/konten';  
            },
            error: function (xhr) {
                alert('Upload Failed: ' + xhr.status + ' - ' + xhr.statusText);
                console.error(xhr.responseText);
                $('#loadinguploadtrainmodel').hide();
            }
        });
    });
});
</script>
</div>
